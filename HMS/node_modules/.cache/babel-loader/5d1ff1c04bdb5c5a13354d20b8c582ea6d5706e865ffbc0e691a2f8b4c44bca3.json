{"ast":null,"code":"'use client';\n\nimport { useRef, useState, useEffect } from 'react';\nimport { useTimeout, useMutationObserver } from '@mantine/hooks';\nimport '../../core/utils/units-converters/rem.mjs';\nimport 'react/jsx-runtime';\nimport { getEnv } from '../../core/utils/get-env/get-env.mjs';\nimport 'clsx';\nimport '../../core/MantineProvider/Mantine.context.mjs';\nimport '../../core/MantineProvider/default-theme.mjs';\nimport '../../core/MantineProvider/MantineProvider.mjs';\nimport '../../core/MantineProvider/MantineThemeProvider/MantineThemeProvider.mjs';\nimport '../../core/MantineProvider/MantineCssVariables/MantineCssVariables.mjs';\nimport '../../core/Box/Box.mjs';\nimport '../../core/DirectionProvider/DirectionProvider.mjs';\nimport { toInt } from '../ScrollArea/utils/to-int.mjs';\nfunction isParent(parentElement, childElement) {\n  if (!childElement || !parentElement) {\n    return false;\n  }\n  let parent = childElement.parentNode;\n  while (parent != null) {\n    if (parent === parentElement) {\n      return true;\n    }\n    parent = parent.parentNode;\n  }\n  return false;\n}\nfunction useFloatingIndicator({\n  target,\n  parent,\n  ref,\n  displayAfterTransitionEnd\n}) {\n  const transitionTimeout = useRef(-1);\n  const [initialized, setInitialized] = useState(false);\n  const [hidden, setHidden] = useState(typeof displayAfterTransitionEnd === \"boolean\" ? displayAfterTransitionEnd : false);\n  const updatePosition = () => {\n    if (!target || !parent || !ref.current) {\n      return;\n    }\n    const targetRect = target.getBoundingClientRect();\n    const parentRect = parent.getBoundingClientRect();\n    const targetComputedStyle = window.getComputedStyle(target);\n    const parentComputedStyle = window.getComputedStyle(parent);\n    const borderTopWidth = toInt(targetComputedStyle.borderTopWidth) + toInt(parentComputedStyle.borderTopWidth);\n    const borderLeftWidth = toInt(targetComputedStyle.borderLeftWidth) + toInt(parentComputedStyle.borderLeftWidth);\n    const position = {\n      top: targetRect.top - parentRect.top - borderTopWidth,\n      left: targetRect.left - parentRect.left - borderLeftWidth,\n      width: targetRect.width,\n      height: targetRect.height\n    };\n    ref.current.style.transform = `translateY(${position.top}px) translateX(${position.left}px)`;\n    ref.current.style.width = `${position.width}px`;\n    ref.current.style.height = `${position.height}px`;\n  };\n  const updatePositionWithoutAnimation = () => {\n    window.clearTimeout(transitionTimeout.current);\n    if (ref.current) {\n      ref.current.style.transitionDuration = \"0ms\";\n    }\n    updatePosition();\n    transitionTimeout.current = window.setTimeout(() => {\n      if (ref.current) {\n        ref.current.style.transitionDuration = \"\";\n      }\n    }, 30);\n  };\n  const targetResizeObserver = useRef(null);\n  const parentResizeObserver = useRef(null);\n  useEffect(() => {\n    updatePosition();\n    if (target) {\n      targetResizeObserver.current = new ResizeObserver(updatePositionWithoutAnimation);\n      targetResizeObserver.current.observe(target);\n      if (parent) {\n        parentResizeObserver.current = new ResizeObserver(updatePositionWithoutAnimation);\n        parentResizeObserver.current.observe(parent);\n      }\n      return () => {\n        targetResizeObserver.current?.disconnect();\n        parentResizeObserver.current?.disconnect();\n      };\n    }\n    return void 0;\n  }, [parent, target]);\n  useEffect(() => {\n    if (parent) {\n      const handleTransitionEnd = event => {\n        if (isParent(event.target, parent)) {\n          updatePositionWithoutAnimation();\n          setHidden(false);\n        }\n      };\n      parent.addEventListener(\"transitionend\", handleTransitionEnd);\n      return () => {\n        parent.removeEventListener(\"transitionend\", handleTransitionEnd);\n      };\n    }\n    return void 0;\n  }, [parent]);\n  useTimeout(() => {\n    if (getEnv() !== \"test\") {\n      setInitialized(true);\n    }\n  }, 20, {\n    autoInvoke: true\n  });\n  useMutationObserver(mutations => {\n    mutations.forEach(mutation => {\n      if (mutation.type === \"attributes\" && mutation.attributeName === \"dir\") {\n        updatePositionWithoutAnimation();\n      }\n    });\n  }, {\n    attributes: true,\n    attributeFilter: [\"dir\"]\n  }, () => document.documentElement);\n  return {\n    initialized,\n    hidden\n  };\n}\nexport { useFloatingIndicator };","map":{"version":3,"names":["isParent","parentElement","childElement","parent","parentNode","useFloatingIndicator","target","ref","displayAfterTransitionEnd","transitionTimeout","useRef","initialized","setInitialized","useState","hidden","setHidden","updatePosition","current","targetRect","getBoundingClientRect","parentRect","targetComputedStyle","window","getComputedStyle","parentComputedStyle","borderTopWidth","toInt","borderLeftWidth","position","top","left","width","height","style","transform","updatePositionWithoutAnimation","clearTimeout","transitionDuration","setTimeout","targetResizeObserver","parentResizeObserver","useEffect","ResizeObserver","observe","disconnect","handleTransitionEnd","event","addEventListener","removeEventListener","useTimeout","getEnv","autoInvoke","useMutationObserver","mutations","forEach","mutation","type","attributeName","attributes","attributeFilter","document","documentElement"],"sources":["E:\\HOCCODE\\HMS\\FRONTEND\\HMS\\node_modules\\@mantine\\core\\src\\components\\FloatingIndicator\\use-floating-indicator.ts"],"sourcesContent":["import { useEffect, useRef, useState, type RefObject } from 'react';\nimport { useMutationObserver, useTimeout } from '@mantine/hooks';\nimport { getEnv } from '../../core';\nimport { toInt } from '../ScrollArea/utils';\n\nfunction isParent(\n  parentElement: HTMLElement | EventTarget | null,\n  childElement: HTMLElement | null\n) {\n  if (!childElement || !parentElement) {\n    return false;\n  }\n\n  let parent = childElement.parentNode;\n  while (parent != null) {\n    if (parent === parentElement) {\n      return true;\n    }\n    parent = parent.parentNode;\n  }\n  return false;\n}\n\ninterface UseFloatingIndicatorInput {\n  target: HTMLElement | null | undefined;\n  parent: HTMLElement | null | undefined;\n  ref: RefObject<HTMLDivElement>;\n  displayAfterTransitionEnd?: boolean;\n}\n\nexport function useFloatingIndicator({\n  target,\n  parent,\n  ref,\n  displayAfterTransitionEnd,\n}: UseFloatingIndicatorInput) {\n  const transitionTimeout = useRef<number>(-1);\n  const [initialized, setInitialized] = useState(false);\n\n  const [hidden, setHidden] = useState(\n    typeof displayAfterTransitionEnd === 'boolean' ? displayAfterTransitionEnd : false\n  );\n\n  const updatePosition = () => {\n    if (!target || !parent || !ref.current) {\n      return;\n    }\n\n    const targetRect = target.getBoundingClientRect();\n    const parentRect = parent.getBoundingClientRect();\n\n    const targetComputedStyle = window.getComputedStyle(target);\n    const parentComputedStyle = window.getComputedStyle(parent);\n\n    const borderTopWidth =\n      toInt(targetComputedStyle.borderTopWidth) + toInt(parentComputedStyle.borderTopWidth);\n    const borderLeftWidth =\n      toInt(targetComputedStyle.borderLeftWidth) + toInt(parentComputedStyle.borderLeftWidth);\n\n    const position = {\n      top: targetRect.top - parentRect.top - borderTopWidth,\n      left: targetRect.left - parentRect.left - borderLeftWidth,\n      width: targetRect.width,\n      height: targetRect.height,\n    };\n\n    ref.current.style.transform = `translateY(${position.top}px) translateX(${position.left}px)`;\n    ref.current.style.width = `${position.width}px`;\n    ref.current.style.height = `${position.height}px`;\n  };\n\n  const updatePositionWithoutAnimation = () => {\n    window.clearTimeout(transitionTimeout.current);\n    if (ref.current) {\n      ref.current.style.transitionDuration = '0ms';\n    }\n    updatePosition();\n    transitionTimeout.current = window.setTimeout(() => {\n      if (ref.current) {\n        ref.current.style.transitionDuration = '';\n      }\n    }, 30);\n  };\n\n  const targetResizeObserver = useRef<ResizeObserver>(null);\n  const parentResizeObserver = useRef<ResizeObserver>(null);\n\n  useEffect(() => {\n    updatePosition();\n\n    if (target) {\n      targetResizeObserver.current = new ResizeObserver(updatePositionWithoutAnimation);\n      targetResizeObserver.current.observe(target);\n\n      if (parent) {\n        parentResizeObserver.current = new ResizeObserver(updatePositionWithoutAnimation);\n        parentResizeObserver.current.observe(parent);\n      }\n\n      return () => {\n        targetResizeObserver.current?.disconnect();\n        parentResizeObserver.current?.disconnect();\n      };\n    }\n\n    return undefined;\n  }, [parent, target]);\n\n  useEffect(() => {\n    if (parent) {\n      const handleTransitionEnd = (event: TransitionEvent) => {\n        if (isParent(event.target, parent)) {\n          updatePositionWithoutAnimation();\n          setHidden(false);\n        }\n      };\n\n      parent.addEventListener('transitionend', handleTransitionEnd);\n      return () => {\n        parent.removeEventListener('transitionend', handleTransitionEnd);\n      };\n    }\n\n    return undefined;\n  }, [parent]);\n\n  useTimeout(\n    () => {\n      // Prevents warning about state update without act\n      if (getEnv() !== 'test') {\n        setInitialized(true);\n      }\n    },\n    20,\n    { autoInvoke: true }\n  );\n\n  useMutationObserver(\n    (mutations) => {\n      mutations.forEach((mutation) => {\n        if (mutation.type === 'attributes' && mutation.attributeName === 'dir') {\n          updatePositionWithoutAnimation();\n        }\n      });\n    },\n    { attributes: true, attributeFilter: ['dir'] },\n    () => document.documentElement\n  );\n\n  return { initialized, hidden };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}