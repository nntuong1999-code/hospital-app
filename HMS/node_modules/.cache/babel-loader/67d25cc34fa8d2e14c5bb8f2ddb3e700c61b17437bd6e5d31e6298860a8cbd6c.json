{"ast":null,"code":"'use client';\n\nimport { filterErrors } from '../hooks/use-form-errors/filter-errors/filter-errors.mjs';\nimport { getPath } from '../paths/get-path.mjs';\nimport 'klona/full';\nconst formRootRule = Symbol(\"root-rule\");\nfunction getValidationResults(errors) {\n  const filteredErrors = filterErrors(errors);\n  return {\n    hasErrors: Object.keys(filteredErrors).length > 0,\n    errors: filteredErrors\n  };\n}\nfunction validateRulesRecord(rules, values, path = \"\", errors = {}) {\n  if (typeof rules !== \"object\" || rules === null) {\n    return errors;\n  }\n  return Object.keys(rules).reduce((acc, ruleKey) => {\n    const rule = rules[ruleKey];\n    const rulePath = `${path === \"\" ? \"\" : `${path}.`}${ruleKey}`;\n    const value = getPath(rulePath, values);\n    let arrayValidation = false;\n    if (typeof rule === \"function\") {\n      acc[rulePath] = rule(value, values, rulePath);\n    }\n    if (typeof rule === \"object\" && Array.isArray(value)) {\n      arrayValidation = true;\n      value.forEach((_item, index) => validateRulesRecord(rule, values, `${rulePath}.${index}`, acc));\n      if (formRootRule in rule) {\n        acc[rulePath] = rule[formRootRule](value, values, rulePath);\n      }\n    }\n    if (typeof rule === \"object\" && typeof value === \"object\" && value !== null) {\n      if (!arrayValidation) {\n        validateRulesRecord(rule, values, rulePath, acc);\n      }\n      if (formRootRule in rule) {\n        acc[rulePath] = rule[formRootRule](value, values, rulePath);\n      }\n    }\n    return acc;\n  }, errors);\n}\nfunction validateValues(validate, values) {\n  if (typeof validate === \"function\") {\n    return getValidationResults(validate(values));\n  }\n  return getValidationResults(validateRulesRecord(validate, values));\n}\nexport { formRootRule, validateValues };","map":{"version":3,"names":["formRootRule","Symbol","getValidationResults","errors","filteredErrors","filterErrors","hasErrors","Object","keys","length","validateRulesRecord","rules","values","path","reduce","acc","ruleKey","rule","rulePath","value","getPath","arrayValidation","Array","isArray","forEach","_item","index","validateValues","validate"],"sources":["E:\\HOCCODE\\SMS\\FRONTEND\\hospitalapp\\node_modules\\@mantine\\form\\src\\validate\\validate-values.ts"],"sourcesContent":["import { filterErrors } from '../hooks/use-form-errors/filter-errors/filter-errors';\nimport { getPath } from '../paths';\nimport { FormErrors, FormRule, FormRulesRecord, FormValidateInput } from '../types';\n\nexport const formRootRule = Symbol('root-rule');\n\nfunction getValidationResults(errors: FormErrors) {\n  const filteredErrors = filterErrors(errors);\n  return { hasErrors: Object.keys(filteredErrors).length > 0, errors: filteredErrors };\n}\n\nfunction validateRulesRecord<T>(\n  rules: FormRulesRecord<T> | undefined,\n  values: T,\n  path = '',\n  errors: FormErrors = {}\n) {\n  if (typeof rules !== 'object' || rules === null) {\n    return errors;\n  }\n\n  return Object.keys(rules).reduce((acc, ruleKey) => {\n    const rule: FormRule<any, any> = (rules as any)[ruleKey];\n    const rulePath = `${path === '' ? '' : `${path}.`}${ruleKey}`;\n    const value = getPath(rulePath, values);\n    let arrayValidation = false;\n\n    if (typeof rule === 'function') {\n      acc[rulePath] = rule(value, values, rulePath);\n    }\n\n    if (typeof rule === 'object' && Array.isArray(value)) {\n      arrayValidation = true;\n      value.forEach((_item, index) =>\n        validateRulesRecord(rule, values, `${rulePath}.${index}`, acc)\n      );\n\n      if (formRootRule in rule) {\n        acc[rulePath] = (rule as any)[formRootRule](value, values, rulePath);\n      }\n    }\n\n    if (typeof rule === 'object' && typeof value === 'object' && value !== null) {\n      if (!arrayValidation) {\n        validateRulesRecord(rule, values, rulePath, acc);\n      }\n\n      if (formRootRule in rule) {\n        acc[rulePath] = (rule as any)[formRootRule](value, values, rulePath);\n      }\n    }\n\n    return acc;\n  }, errors);\n}\n\nexport function validateValues<T>(validate: FormValidateInput<T> | undefined, values: T) {\n  if (typeof validate === 'function') {\n    return getValidationResults(validate(values));\n  }\n\n  return getValidationResults(validateRulesRecord(validate, values));\n}\n"],"mappings":";;;;;AAIO,MAAMA,YAAA,GAAeC,MAAA,CAAO,WAAW;AAE9C,SAASC,qBAAqBC,MAAA,EAAoB;EAChD,MAAMC,cAAA,GAAiBC,YAAA,CAAaF,MAAM;EAC1C,OAAO;IAAEG,SAAA,EAAWC,MAAA,CAAOC,IAAA,CAAKJ,cAAc,EAAEK,MAAA,GAAS;IAAGN,MAAA,EAAQC;EAAA,CAAe;AACrF;AAEA,SAASM,oBACPC,KAAA,EACAC,MAAA,EACAC,IAAA,GAAO,IACPV,MAAA,GAAqB,EAAC,EACtB;EACA,IAAI,OAAOQ,KAAA,KAAU,YAAYA,KAAA,KAAU,MAAM;IAC/C,OAAOR,MAAA;EACT;EAEA,OAAOI,MAAA,CAAOC,IAAA,CAAKG,KAAK,EAAEG,MAAA,CAAO,CAACC,GAAA,EAAKC,OAAA,KAAY;IACjD,MAAMC,IAAA,GAA4BN,KAAA,CAAcK,OAAO;IACvD,MAAME,QAAA,GAAW,GAAGL,IAAA,KAAS,KAAK,KAAK,GAAGA,IAAI,GAAG,GAAGG,OAAO;IAC3D,MAAMG,KAAA,GAAQC,OAAA,CAAQF,QAAA,EAAUN,MAAM;IACtC,IAAIS,eAAA,GAAkB;IAEtB,IAAI,OAAOJ,IAAA,KAAS,YAAY;MAC9BF,GAAA,CAAIG,QAAQ,IAAID,IAAA,CAAKE,KAAA,EAAOP,MAAA,EAAQM,QAAQ;IAC9C;IAEA,IAAI,OAAOD,IAAA,KAAS,YAAYK,KAAA,CAAMC,OAAA,CAAQJ,KAAK,GAAG;MACpDE,eAAA,GAAkB;MAClBF,KAAA,CAAMK,OAAA,CAAQ,CAACC,KAAA,EAAOC,KAAA,KACpBhB,mBAAA,CAAoBO,IAAA,EAAML,MAAA,EAAQ,GAAGM,QAAQ,IAAIQ,KAAK,IAAIX,GAAG,EAC/D;MAEA,IAAIf,YAAA,IAAgBiB,IAAA,EAAM;QACxBF,GAAA,CAAIG,QAAQ,IAAKD,IAAA,CAAajB,YAAY,EAAEmB,KAAA,EAAOP,MAAA,EAAQM,QAAQ;MACrE;IACF;IAEA,IAAI,OAAOD,IAAA,KAAS,YAAY,OAAOE,KAAA,KAAU,YAAYA,KAAA,KAAU,MAAM;MAC3E,IAAI,CAACE,eAAA,EAAiB;QACpBX,mBAAA,CAAoBO,IAAA,EAAML,MAAA,EAAQM,QAAA,EAAUH,GAAG;MACjD;MAEA,IAAIf,YAAA,IAAgBiB,IAAA,EAAM;QACxBF,GAAA,CAAIG,QAAQ,IAAKD,IAAA,CAAajB,YAAY,EAAEmB,KAAA,EAAOP,MAAA,EAAQM,QAAQ;MACrE;IACF;IAEA,OAAOH,GAAA;EACT,GAAGZ,MAAM;AACX;AAEO,SAASwB,eAAkBC,QAAA,EAA4ChB,MAAA,EAAW;EACvF,IAAI,OAAOgB,QAAA,KAAa,YAAY;IAClC,OAAO1B,oBAAA,CAAqB0B,QAAA,CAAShB,MAAM,CAAC;EAC9C;EAEA,OAAOV,oBAAA,CAAqBQ,mBAAA,CAAoBkB,QAAA,EAAUhB,MAAM,CAAC;AACnE","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}