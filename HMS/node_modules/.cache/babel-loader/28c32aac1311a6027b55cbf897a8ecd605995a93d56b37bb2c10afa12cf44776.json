{"ast":null,"code":"'use client';\n\nimport { useRef, useCallback, useEffect } from 'react';\nimport { scopeTab } from './scope-tab.mjs';\nimport { FOCUS_SELECTOR, tabbable, focusable } from './tabbable.mjs';\nfunction useFocusTrap(active = true) {\n  const ref = useRef(null);\n  const focusNode = node => {\n    let focusElement = node.querySelector(\"[data-autofocus]\");\n    if (!focusElement) {\n      const children = Array.from(node.querySelectorAll(FOCUS_SELECTOR));\n      focusElement = children.find(tabbable) || children.find(focusable) || null;\n      if (!focusElement && focusable(node)) {\n        focusElement = node;\n      }\n    }\n    if (focusElement) {\n      focusElement.focus({\n        preventScroll: true\n      });\n    } else if (process.env.NODE_ENV === \"development\") {\n      console.warn(\"[@mantine/hooks/use-focus-trap] Failed to find focusable element within provided node\", node);\n    }\n  };\n  const setRef = useCallback(node => {\n    if (!active) {\n      return;\n    }\n    if (node === null) {\n      return;\n    }\n    if (ref.current === node) {\n      return;\n    }\n    if (node) {\n      setTimeout(() => {\n        if (node.getRootNode()) {\n          focusNode(node);\n        } else if (process.env.NODE_ENV === \"development\") {\n          console.warn(\"[@mantine/hooks/use-focus-trap] Ref node is not part of the dom\", node);\n        }\n      });\n      ref.current = node;\n    } else {\n      ref.current = null;\n    }\n  }, [active]);\n  useEffect(() => {\n    if (!active) {\n      return void 0;\n    }\n    ref.current && setTimeout(() => focusNode(ref.current));\n    const handleKeyDown = event => {\n      if (event.key === \"Tab\" && ref.current) {\n        scopeTab(ref.current, event);\n      }\n    };\n    document.addEventListener(\"keydown\", handleKeyDown);\n    return () => document.removeEventListener(\"keydown\", handleKeyDown);\n  }, [active]);\n  return setRef;\n}\nexport { useFocusTrap };","map":{"version":3,"names":["useFocusTrap","active","ref","useRef","focusNode","node","focusElement","querySelector","children","Array","from","querySelectorAll","FOCUS_SELECTOR","find","tabbable","focusable","focus","preventScroll","process","env","NODE_ENV","console","warn","setRef","useCallback","current","setTimeout","getRootNode","useEffect","handleKeyDown","event","key","scopeTab","document","addEventListener","removeEventListener"],"sources":["E:\\HOCCODE\\HMS\\FRONTEND\\HMS\\node_modules\\@mantine\\hooks\\src\\use-focus-trap\\use-focus-trap.ts"],"sourcesContent":["import { useCallback, useEffect, useRef } from 'react';\nimport { scopeTab } from './scope-tab';\nimport { FOCUS_SELECTOR, focusable, tabbable } from './tabbable';\n\nexport function useFocusTrap(active = true): React.RefCallback<HTMLElement | null> {\n  const ref = useRef<HTMLElement>(null);\n\n  const focusNode = (node: HTMLElement) => {\n    let focusElement: HTMLElement | null = node.querySelector('[data-autofocus]');\n\n    if (!focusElement) {\n      const children = Array.from<HTMLElement>(node.querySelectorAll(FOCUS_SELECTOR));\n      focusElement = children.find(tabbable) || children.find(focusable) || null;\n      if (!focusElement && focusable(node)) {\n        focusElement = node;\n      }\n    }\n\n    if (focusElement) {\n      focusElement.focus({ preventScroll: true });\n    } else if (process.env.NODE_ENV === 'development') {\n      // eslint-disable-next-line no-console\n      console.warn(\n        '[@mantine/hooks/use-focus-trap] Failed to find focusable element within provided node',\n        node\n      );\n    }\n  };\n\n  const setRef = useCallback(\n    (node: HTMLElement | null) => {\n      if (!active) {\n        return;\n      }\n\n      if (node === null) {\n        return;\n      }\n\n      if (ref.current === node) {\n        return;\n      }\n\n      if (node) {\n        // Delay processing the HTML node by a frame. This ensures focus is assigned correctly.\n        setTimeout(() => {\n          if (node.getRootNode()) {\n            focusNode(node);\n          } else if (process.env.NODE_ENV === 'development') {\n            // eslint-disable-next-line no-console\n            console.warn('[@mantine/hooks/use-focus-trap] Ref node is not part of the dom', node);\n          }\n        });\n\n        ref.current = node;\n      } else {\n        ref.current = null;\n      }\n    },\n    [active]\n  );\n\n  useEffect(() => {\n    if (!active) {\n      return undefined;\n    }\n\n    ref.current && setTimeout(() => focusNode(ref.current!));\n\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (event.key === 'Tab' && ref.current) {\n        scopeTab(ref.current, event);\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [active]);\n\n  return setRef;\n}\n"],"mappings":";;;;;AAIO,SAASA,aAAaC,MAAA,GAAS,MAA6C;EACjF,MAAMC,GAAA,GAAMC,MAAA,CAAoB,IAAI;EAEpC,MAAMC,SAAA,GAAaC,IAAA,IAAsB;IACvC,IAAIC,YAAA,GAAmCD,IAAA,CAAKE,aAAA,CAAc,kBAAkB;IAE5E,IAAI,CAACD,YAAA,EAAc;MACjB,MAAME,QAAA,GAAWC,KAAA,CAAMC,IAAA,CAAkBL,IAAA,CAAKM,gBAAA,CAAiBC,cAAc,CAAC;MAC9EN,YAAA,GAAeE,QAAA,CAASK,IAAA,CAAKC,QAAQ,KAAKN,QAAA,CAASK,IAAA,CAAKE,SAAS,KAAK;MACtE,IAAI,CAACT,YAAA,IAAgBS,SAAA,CAAUV,IAAI,GAAG;QACpCC,YAAA,GAAeD,IAAA;MACjB;IACF;IAEA,IAAIC,YAAA,EAAc;MAChBA,YAAA,CAAaU,KAAA,CAAM;QAAEC,aAAA,EAAe;MAAA,CAAM;IAC5C,WAAWC,OAAA,CAAQC,GAAA,CAAIC,QAAA,KAAa,eAAe;MAEjDC,OAAA,CAAQC,IAAA,CACN,yFACAjB,IAAA,CACF;IACF;EACF;EAEA,MAAMkB,MAAA,GAASC,WAAA,CACZnB,IAAA,IAA6B;IAC5B,IAAI,CAACJ,MAAA,EAAQ;MACX;IACF;IAEA,IAAII,IAAA,KAAS,MAAM;MACjB;IACF;IAEA,IAAIH,GAAA,CAAIuB,OAAA,KAAYpB,IAAA,EAAM;MACxB;IACF;IAEA,IAAIA,IAAA,EAAM;MAERqB,UAAA,CAAW,MAAM;QACf,IAAIrB,IAAA,CAAKsB,WAAA,EAAY,EAAG;UACtBvB,SAAA,CAAUC,IAAI;QAChB,WAAWa,OAAA,CAAQC,GAAA,CAAIC,QAAA,KAAa,eAAe;UAEjDC,OAAA,CAAQC,IAAA,CAAK,mEAAmEjB,IAAI;QACtF;MACF,CAAC;MAEDH,GAAA,CAAIuB,OAAA,GAAUpB,IAAA;IAChB,OAAO;MACLH,GAAA,CAAIuB,OAAA,GAAU;IAChB;EACF,GACA,CAACxB,MAAM,EACT;EAEA2B,SAAA,CAAU,MAAM;IACd,IAAI,CAAC3B,MAAA,EAAQ;MACX,OAAO;IACT;IAEAC,GAAA,CAAIuB,OAAA,IAAWC,UAAA,CAAW,MAAMtB,SAAA,CAAUF,GAAA,CAAIuB,OAAQ,CAAC;IAEvD,MAAMI,aAAA,GAAiBC,KAAA,IAAyB;MAC9C,IAAIA,KAAA,CAAMC,GAAA,KAAQ,SAAS7B,GAAA,CAAIuB,OAAA,EAAS;QACtCO,QAAA,CAAS9B,GAAA,CAAIuB,OAAA,EAASK,KAAK;MAC7B;IACF;IAEAG,QAAA,CAASC,gBAAA,CAAiB,WAAWL,aAAa;IAClD,OAAO,MAAMI,QAAA,CAASE,mBAAA,CAAoB,WAAWN,aAAa;EACpE,GAAG,CAAC5B,MAAM,CAAC;EAEX,OAAOsB,MAAA;AACT","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}